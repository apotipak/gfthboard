<!DOCTYPE html>
<html lang="en">
    <head>
        {% load static %}
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Guardforce - Covide Vaccine Update Page</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />

        <!-- Datepicker -->
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />                
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/3.0.5/daterangepicker.css" rel="stylesheet" type="text/css">

        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="{% static 'css/covid_styles.css' %}" rel="stylesheet" />
        
    </head> 
    <body id="page-top" style="background-color: #198754;">    
        
        <!-- Navigation-->        
        <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
            <div class="container">                
                <img src="{% static 'img/logo.png' %}" style="height:30px;">                
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#"></a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#"></a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#"></a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container h-100 v-100 d-flex justify-content-center">

            
            <div class="col-12">
                <br><br><br><br><br>        
    
                <form method="post" autocomplete="off" name="search_emp_form" id="id_search_emp_form">
                  {% csrf_token %}
      
                <div class="card card-primary pb-2" style="background-color: #edeeef;">
      
                    <div class="card-body">
                      
                        <!--<h3>อัพเดทข้อมูลการฉีดวัคซีน</h3>-->
                        <div class="input-group col-6 float-left pt-2">

                            <div class="input-group-prepend col-3 bg-secondary p-0"><span class="input-group-text rounded-0" style="width: 100%;"><b>รหัสพนักงาน</b></span></div>
                            <input type="text" class="form-control form-control-md" placeholder="ป้อนรหัสพนักงาน" id="id_emp_id" name="emp_id" />
                            <button type="submit" class="btn btn-sm btn-secondary float-right text-right" id="id_search_button">&nbsp;&nbsp;ค้นหา&nbsp;</button>
                        </div>
                    
                    </div>                      
                </div>
                </form>

                <div class="pt-1">&nbsp;</div>

                <form method="post" autocomplete="off" name="save_emp_form" id="id_save_emp_form">
                    {% csrf_token %}
  
                <div class="card card-primary" style="background-color: #edeeef;">
                    <div class="card-body">
                        <h3>อัพเดทข้อมูลการฉีดวัคซีน</h3>
                        <div class="input-group col-6 float-left pt-2">
                            <div class="input-group-prepend col-3 bg-secondary p-0"><span class="input-group-text rounded-0" style="width: 100%;"><b>ชื่อ-สกุล</b></span></div>
                            <input type="text" class="form-control form-control-md" id="id_name_th" name="name_th" readonly />
                        </div>

                        <div class="input-group col-6 float-left pt-2">
                        <div class="input-group-prepend col-3 bg-secondary pt-0"><span class="input-group-text rounded-0" style="width:100%;"><b>ประวัติการฉีดวัคซีน</b></span></div>
                        <select id="id_category_options" name="category_options" class="form-control form-control-md" style="border-radius: 0;">
                          <option value="0">เลือกเข็มที่ฉีด</option>
                          <option value="1">ฉีดเข็มที่ 1</option>
                          <option value="2">ฉีดเข็มที่ 2</option>
                          <option value="99">ฉีดครบ 2 เข็ม</option>
                        </select>
                        
                        <input type="text" style="width: 80px;" id="id_get_vaccine_date" name="get_vaccine_date" class="form-control border-bottom-1 rounded-0 bg-white" required="" placeholder="เลือกวันที่่">

                        <select id="id_get_vaccine_time_options" name="get_vaccine_time_options" class="form-control form-control-md" style="border-radius: 0;">
                            <option value="0">เลือกเวลา</option>
                            <option value="7">7:00</option>
                            <option value="8">8:00</option>
                            <option value="9">9:00</option>
                            <option value="10">10:00</option>
                            <option value="11">11:00</option>
                            <option value="12">12:00</option>
                            <option value="13">13:00</option>
                            <option value="14">14:00</option>
                            <option value="15">15:00</option>
                            <option value="16">16:00</option>
                            <option value="17">17:00</option>
                            <option value="18">18:00</option>
                          </select>
  
                        <input type="text" class="form-control form-control-md" name="full_name" placeholder="เลือกสถานที่" />

                        </div>

                        <div class="input-group col-12 float-right text-right pt-2">
                            
                        </div>
                    </div>
                    <div class="card-footer text-center">
                        <button class="btn btn-md btn-primary" id="id_search_button">&nbsp;&nbsp;บันทึกข้อมูล&nbsp;</button>
                    </div>
                </div>
                </form>

            </div>



        </div>

        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
        <!--<script src="{% static 'js/scripts.js' %}"></script>-->
        <!--<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>-->
        <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/3.0.5/daterangepicker.min.js"></script>-->

        <script>

            function getDate(){
                var todaydate = new Date();
                var day = todaydate.getDate();
                var month = todaydate.getMonth() + 1;
                var year = todaydate.getFullYear();
                var datestring = day + "/" + month + "/" + year;
                document.getElementById("id_get_vaccine_date").value = datestring;
            } 
            getDate(); 

            $(document).ready(function () {
                /*
                $('#id_date_from').datepicker(
                    {dateFormat: 'dd/mm/yy', altField: '#thealtdate', autoclose: true, todayHighlight: true
                }).datepicker("setDate", new Date(2021,02,01));
                */
               //alert("TEST");
            });

            $('#id_search_emp_form').on('submit', function(event){                
                event.preventDefault();
                //alert("TODO");
                formData = new FormData();
                data = new FormData($('#id_search_emp_form').get(0));
                $.ajax({      
                    type: "POST",
                    url: '{% url "ajax-covid-vaccine-update-search-employee" %}',
                    dataType: 'json',
                    data: data,
                    cache: false,
                    processData: false,
                    contentType: false, 
                    success: function(json) {
                        if(json.is_error) {
                            alert(json.message);
                        } else {          
                            name_th = json.name_th;
                            $("#id_name_th").val(name_th);
                        }
                    },
                });                 
            });

            $('#id_save_emp_form').on('submit', function(event){                
                event.preventDefault();
                alert("TODO");

                /*
                formData = new FormData();
                data = new FormData($('#id_search_emp_form').get(0));
                $.ajax({      
                    type: "POST",
                    url: '{% url "ajax-covid-vaccine-update-search-employee" %}',
                    dataType: 'json',
                    data: data,
                    cache: false,
                    processData: false,
                    contentType: false, 
                    success: function(json) {
                        if(json.is_error) {
                            alert(json.message);
                        } else {          
                            name_th = json.name_th;
                            $("#id_name_th").val(name_th);
                        }
                    },
                });
                */
                          
            });

        </script>


    </body>
</html>
